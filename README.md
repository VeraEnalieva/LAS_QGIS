# LAS_QGIS
Обработка облаков точек и производных данных, в том числе растров, через QGIS

# FindMaxPointByLas.py
Поиск максимальной высоты в пределах полигонов.

По материалам лазерного сканирования в формате *.las находит в пределах заданных полигонов максимальную отметку высоты.
Результат появляется в виде нового полигонального слоя в атрибутах которого указана максимально высокая точка в абсолютных и относительных высотах.

Запуск:
1. Из-под Python консоли QGIS
2. Необходима установленная на ПК свободно распространяемая программка LASTools (https://rapidlasso.de/downloads/)
    Желательно установить её на диск С:. В противном случае необходим указать путь к программе в "USER_SETTINGS_6" в коде инструмента (примерно строка 30)
3.  Укажите входные параметры:
    - USER_SETTING 1 - папка, куда сохранить итоговые файлы;
    - USER_SETTING 2 - файл с векторными полигонами; 
    - USER_SETTING 3 - растр рельефа (Type_1A) в tif формате. 
    - USER_SETTING 4 - папка с данными las;
    - USER_SETTING 5 - файл с номенелатурой планшетов. Это векторные полигоны = границы традиционных планшетов, где во втором! столбце указаны названия планшетов;
    По сути все эти настройки заполняются один раз. В дальнейшем изменяются только первые две;
4. Можно запускать. Время обработки зависит от количества полигонов.  Примерно 1 минута на 1 полигон.
5. По итогу в папке, указанной в  USER_SETTING 1 появится файл с резульатом area_result.gpkg
6. Кроме него там же сохраняются файлы:
    - p_MAX_*a1*_*103.1* - файл с максимальной точкой. В атрибутах абсолютные и относительные отметки. 
      В названии файла a1 (area 1) — это название полигона. 103.1 - максимальная абсолютная высота;
    - w_* временные промежуточные файлы. Могут понадобится для отладки на этапе тестирования. В дальнейшем планируется от них избавиться;
    - Z_cloud - облако точек в верторном формате.
    - *_tmp* - можно смело удалять;

Предполагается, что все векторные данные в gpkg формате. Все растровые - в tif. Облако точек - в las